*** Begin Patch
*** Update File: app/Controllers/StatsController.php
@@
 class StatsController extends BaseController
 {
+    /**
+     * Fallback nazwy schematu na bazie scheme + params_json.
+     * Nie narusza istniejącej logiki – tylko zwraca etykietę.
+     */
+    private function _schemaAutoNameFromParams(string $scheme, $params): string
+    {
+        if (!is_array($params)) {
+            $params = json_decode((string)$params, true) ?: [];
+        }
+        // tolerancja snake/camel
+        $xa = $params['x_a'] ?? $params['xA'] ?? null;
+        $ya = $params['y_a'] ?? $params['yA'] ?? null;
+        $xb = $params['x_b'] ?? $params['xB'] ?? null;
+        $yb = $params['y_b'] ?? $params['yB'] ?? null;
+        $ka = $params['k_a'] ?? $params['kA'] ?? null;
+        $kb = $params['k_b'] ?? $params['kB'] ?? null;
+
+        if ($scheme === 'S1') {
+            $a = ($xa!==null && $ya!==null) ? " A: x={$xa}, y={$ya}" : '';
+            $b = ($xb!==null && $yb!==null) ? " B: x={$xb}, y={$yb}" : '';
+            return trim('S1: x≥y'.$a.$b);
+        }
+        if ($scheme === 'S2') {
+            $a = ($ka!==null) ? " A: k={$ka}" : '';
+            $b = ($kb!==null) ? " B: k={$kb}" : '';
+            return trim('S2: topK'.$a.$b);
+        }
+        return $scheme ?: 'Schemat';
+    }
*** End Patch
